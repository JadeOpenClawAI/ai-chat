# ============================================================
# AI Chat Application - Environment Configuration
# Copy to .env.local and fill in your values
# ============================================================

# LLM Providers
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# OpenAI Codex OAuth (alternative to API key)
OPENAI_CODEX_CLIENT_ID=
OPENAI_CODEX_CLIENT_SECRET=
OPENAI_CODEX_REFRESH_TOKEN=

# Provider selection: 'anthropic' | 'openai' | 'codex'
DEFAULT_PROVIDER=anthropic
DEFAULT_MODEL=claude-sonnet-4-5

# Context Management
# Maximum tokens before triggering compaction
MAX_CONTEXT_TOKENS=150000
# Compaction mode: off | truncate | summary | running-summary
CONTEXT_COMPACTION_MODE=summary
# Fraction of max tokens at which to start compaction (0.0 - 1.0)
COMPACTION_THRESHOLD=0.75
# Target fraction after compaction (e.g. 0.10 = compact down near 10%)
COMPACTION_TARGET_RATIO=0.10
# Number of recent messages to preserve verbatim during compaction
KEEP_RECENT_MESSAGES=10
# Minimum recent messages to preserve if context is still too large
MIN_RECENT_MESSAGES=4
# In running-summary mode, refresh summary once context exceeds this ratio
RUNNING_SUMMARY_THRESHOLD=0.35
# Max tokens allowed in generated conversation summaries
COMPACTION_SUMMARY_MAX_TOKENS=1200
# Max transcript chars sent to summarizer (older content may be clipped)
COMPACTION_TRANSCRIPT_MAX_CHARS=120000
# Tool result compaction
# Tool compaction mode: off | summary | truncate
TOOL_COMPACTION_MODE=summary
# Token count above which tool compaction runs
TOOL_COMPACTION_THRESHOLD=2000
# Max tokens for tool result summaries (summary mode)
TOOL_COMPACTION_SUMMARY_MAX_TOKENS=1000
# Max input chars sent into tool result summarization
TOOL_COMPACTION_INPUT_MAX_CHARS=50000
# Max chars kept when truncating tool output
TOOL_COMPACTION_TRUNCATE_MAX_CHARS=8000
# Legacy alias for threshold (still supported)
TOOL_RESULT_SUMMARY_THRESHOLD=2000

# App
NEXT_PUBLIC_APP_NAME=AI Chat

# Dev Server TLS
# Set to disable default self-signed localhost cert generation in dev
# (default generation uses local openssl and does not require sudo)
NO_SELF_SIGNED_CERT=
# Set to disable default HTTP->HTTPS redirect in dev when HTTPS is enabled
NO_HTTP_TO_HTTPS_REDIRECT=
# Optional explicit cert paths (used by `pnpm dev` when set)
DEV_HTTPS_KEY_FILE=
DEV_HTTPS_CERT_FILE=
DEV_HTTPS_CA_FILE=
# Optional location for generated localhost cert cache
# Default: ~/.ai-chat/dev-certs (regenerated automatically when expired)
DEV_GENERATED_CERT_DIR=
